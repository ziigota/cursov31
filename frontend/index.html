<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Анализ Spotify треков - Курсовая работа</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/navigation.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <header>
        <h1>Анализ Spotify треков</h1>
        <p>Курсовая работа по статистическому моделированию</p>
    </header>

    <!-- НАВИГАЦИЯ -->
    <nav class="navigation">
        <a href="#section-data" class="nav-link">Датасет</a>
        <a href="#section-distributions" class="nav-link">Распределения</a>
        <a href="#section-correlations" class="nav-link">Корреляции</a>
        <a href="#section-genres" class="nav-link">Жанры</a>
        <a href="#section-plots" class="nav-link">Графики</a>
        <a href="#section-model" class="nav-link">Модель</a>
        <a href="#section-predict" class="nav-link">Предсказание</a>
    </nav>

    <div class="content">
        <!-- Раздел 1: Информация о датасете -->
        <div class="section" id="section-data">
            <h2>Информация о датасете</h2>
            <div class="controls">
                <button class="button" onclick="loadDataInfo()">Загрузить информацию</button>
            </div>
            <div class="loading" id="loading-info">
                <div class="spinner"></div>
                <p>Загрузка данных...</p>
            </div>
            <div id="data-info"></div>
        </div>

        <div class="section" id="section-distributions">
            <h2>Распределение признаков</h2>
            <p style="margin-bottom: 15px; color: #666;">Анализ распределения громкости, темпа и танцевальности</p>
            <div class="controls">
                <button class="button" onclick="analyzeDistributions()">Анализировать распределения</button>
            </div>
            <div class="loading" id="loading-dist">
                <div class="spinner"></div>
                <p>Анализ данных...</p>
            </div>
            <div id="distributions-result"></div>
        </div>

        <div class="section" id="section-correlations">
            <h2>Влияние на популярность</h2>
            <p style="margin-bottom: 15px; color: #666;">Какие аудио-фичи влияют на популярность трека?</p>
            <div class="controls">
                <button class="button" onclick="analyzeCorrelations()">Анализировать корреляции</button>
            </div>
            <div class="loading" id="loading-corr">
                <div class="spinner"></div>
                <p>Вычисление корреляций...</p>
            </div>
            <div id="correlations-result"></div>
        </div>

        <div class="section" id="section-genres">
            <h2>Различия между жанрами</h2>
            <p style="margin-bottom: 15px; color: #666;">Чем отличаются треки разных жанров?</p>
            <div class="controls">
                <button class="button" onclick="analyzeGenres()">Анализировать жанры</button>
            </div>
            <div class="loading" id="loading-genres">
                <div class="spinner"></div>
                <p>Анализ жанров...</p>
            </div>
            <div id="genres-result"></div>
        </div>

        <!-- Раздел графиков объединён -->
        <div class="section" id="section-plots">
            <h2>Визуализации</h2>

            <div style="margin-bottom: 40px;">
                <h3 style="color: #000; font-weight: 700; margin-bottom: 15px;">Темп vs Популярность</h3>
                <div class="controls">
                    <button class="button" onclick="loadScatterPlot()">Построить график</button>
                </div>
                <div class="loading" id="loading-scatter">
                    <div class="spinner"></div>
                    <p>Построение графика...</p>
                </div>
                <div id="scatter-plot"></div>
            </div>

            <div style="margin-bottom: 40px;">
                <h3 style="color: #000; font-weight: 700; margin-bottom: 15px;">Распределение громкости</h3>
                <div class="controls">
                    <button class="button" onclick="loadHistogram()">Построить гистограмму</button>
                </div>
                <div class="loading" id="loading-histogram">
                    <div class="spinner"></div>
                    <p>Построение гистограммы...</p>
                </div>
                <div id="histogram-plot"></div>
            </div>

            <div>
                <h3 style="color: #000; font-weight: 700; margin-bottom: 15px;">Тепловая карта корреляций</h3>
                <div class="controls">
                    <button class="button" onclick="loadHeatmap()">Построить тепловую карту</button>
                </div>
                <div class="loading" id="loading-heatmap">
                    <div class="spinner"></div>
                    <p>Построение тепловой карты...</p>
                </div>
                <div id="heatmap-plot"></div>
            </div>
        </div>

        <div class="section" id="section-model">
            <h2>Модель регрессии популярности</h2>
            <p>Обучение модели для предсказания популярности треков</p>
            <div class="controls">
                <button class="button" onclick="trainModel()">Обучить модель</button>
                <button class="button" onclick="loadModelMetrics()">Показать метрики</button>
            </div>
            <div class="loading" id="loading-model">
                <div class="spinner"></div>
                <p>Обучение модели (это может занять 1-2 минуты)...</p>
            </div>
            <div id="model-result"></div>
        </div>

        <!-- НОВЫЙ РАЗДЕЛ: Предсказание популярности -->
        <div class="section" id="section-predict">
            <h2>Предсказать популярность трека</h2>
            <p style="margin-bottom: 20px; color: #666;">
                Введите характеристики трека, и модель предскажет его популярность
            </p>

            <div id="predict-form-container">
                <!-- Форма будет показана только после обучения модели -->
                <div class="info-box" style="text-align: center;">
                    <p style="font-size: 1.1em;">
                        <strong>Сначала обучите модель!</strong><br>
                        Перейдите в раздел "Модель" и нажмите кнопку "Обучить модель"
                    </p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Курсовая работа по статистическому моделированию | Spotify Tracks Dataset</p>
        <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.7;">
            Dataset: <a href="https://www.kaggle.com/datasets/zaheenhamidani/ultimate-spotify-tracks-db" target="_blank">
            Kaggle - Ultimate Spotify Tracks DB
        </a>
        </p>
    </footer>
</div>

<!-- JavaScript -->
<script src="js/config.js"></script>
<script src="js/api.js"></script>
<script src="js/utils.js"></script>
<script src="js/components/dataInfo.js"></script>
<script src="js/components/distributions.js"></script>
<script src="js/components/correlations.js"></script>
<script src="js/components/genres.js"></script>
<script src="js/components/plots.js"></script>
<script src="js/components/model.js"></script>
<script src="js/components/predict.js"></script>
<script src="js/main.js"></script>
</body>
</html>